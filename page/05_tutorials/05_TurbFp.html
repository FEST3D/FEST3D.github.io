<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
   
   <meta name="description" content="">
    
    <meta name="author" content="FEST3D Team" >
    <link rel="icon" href="../../favicon.png">

    <title>Flat plate (Turbulent) &ndash; FEST-3D</title>

    <link href="../../css/bootstrap.min.css" rel="stylesheet">
    <link href="../../css/pygments.css" rel="stylesheet">
    <link href="../../css/font-awesome.min.css" rel="stylesheet">
    <link href="../../css/local.css" rel="stylesheet">
    
    <link  href="../../tipuesearch/tipuesearch.css" rel="stylesheet">
    
    

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <script src="../../js/jquery-2.1.3.min.js"></script>
    <script src="../../js/svg-pan-zoom.min.js"></script>

  </head>

  <body>

    <!-- Fixed navbar -->
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../../index.html">FEST-3D </a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
        
            <li><a href='../../page/index.html'>Documentation</a></li>
      
            <li class="dropdown hidden-xs visible-sm visible-md hidden-lg">
              <a href="#" class="dropdown-toggle"
              data-toggle="dropdown" role="button"
              aria-haspopup="true"
     aria-expanded="false">Contents <span class="caret"></span></a>
        <ul class="dropdown-menu">
          
              
            <li><a href="../../lists/files.html">Source Files</a></li>
        
        
        
            <li><a href="../../lists/modules.html">Modules</a></li>
        
            
                                
            <li><a href="../../lists/procedures.html">Procedures</a></li>
        
               
        
            <li><a href="../../program/main.html">Program</a></li>
      
            </ul>
            </li>


<li class="visible-xs hidden-sm visible-lg"><a href="../../lists/files.html">Source Files</a></li>



<li class="visible-xs hidden-sm visible-lg"><a href="../../lists/modules.html">Modules</a></li>



<li class="visible-xs hidden-sm visible-lg"><a href="../../lists/procedures.html">Procedures</a></li>

                             

<li class="visible-xs hidden-sm visible-lg"><a href="../../program/main.html">Program</a></li>

          </ul>
        
        <form action="../../search.html" class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="text" class="form-control" placeholder="Search" name="q" id="tipue_search_input" autocomplete="off" required>
        </div>
<!--
        <button type="submit" class="btn btn-default">Submit</button>
-->
        </form>
        
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">
    
  <div class="row">
    <h1>Flat plate (Turbulent)</h1>
    <div class="row">
    <div class="col-lg-12">
    <div class="well well-sm" style="min-height: 40px;">
      <ul class="list-inline" style="margin-bottom:0px; display:inline">
         
         
<!--
        
-->
      </ul>
        <ol class="breadcrumb in-well">
      
         <li><a href='../../page/index.html'>Documentation</a></li>
      
         <li><a href='../../page/05_tutorials/index.html'>Tutorials</a></li>
      
         <li class="active">Flat plate (Turbulent)</li>
      </ol>
    </div>
    </div>
    </div>
  </div>
  
  <div class="row">
    <div class="col-md-9 col-md-push-3" id='text'>
      <figure>
  <div style="display: flex; flex-wrap: wrap; justify-content: center; align-items:center">
    <img src="../../media/tutorials/TBLSubsonicDomain.png" alt="Contours" style="width:350px">
  </div>
  <div style="display: flex; flex-wrap: wrap; justify-content: center; align-items:center">
    <figcaption> Fig.1 Domain of computation for turbulent flow over flat plate test case.</figcaption>
  </div>
</figure>

<h2 id="problem-statement">Problem Statement</h2>
<p>In this test case a subsonic turbulent flow of Mach 0.2 over a flat plate will be simulated. The domain used, and boundary
condition applied to the domain are illustrated in Fig. 1. The case definition and grid used were obtained form 
<a href="https://turbmodels.larc.nasa.gov/flatplate.html"> Turbulence Modeling Resource</a>. </p>
<h2 id="mesh">Mesh</h2>
<p>A structured grid of size 113 Ã— 81 x 2 will be used as shown in Fig. 3. The grid is available in the 
tutorial folder <strong>|rootFolder|/run/Tutorial/TurbulentFlatPlate/CreateBlocks/</strong>. In the <code>blocking_point.f90</code>
edit the number of blocks in the I-direction and J-direction. In this test case four blocks will
be used. <br>
<code>integer, parameter :: xblocks = 4</code><br>
<code>integer, parameter :: yblocks = 1</code><br>
In order to compile the <code>blocking_point.f90</code> code with gfortran and execute it, commands are written 
in the makefile. Just use following command to generate gridfiles in the <strong>grid/</strong> folder.<br></p>
<div class="codehilite"><pre><span></span>$make
</pre></div>


<p>Run the previous command in the <strong>|rootFolder|/run/Tutorial/TurbulentFlatPlate/CreateBlocks/</strong> directory.
<figure>
  <div style="display: flex; flex-wrap: wrap; justify-content: center; align-items:center">
    <img src="../../media/tutorials/TBLSubsonicMesh.png" alt="mesh" style="width:350px">
  </div>
  <div style="display: flex; flex-wrap: wrap; justify-content: center; align-items:center">
    <figcaption> Fig.3 The Mesh for turbulent flow over flat plate test case.</figcaption>
  </div>
</figure></p>
<h2 id="setup">Setup</h2>
<p>In order to setup the case directory, a python automation script is provided: <code>automaton.py</code>. First setup the most important
parameters, the paths to the grid files and main executable binary to FEST-3D<br>
<code>RunDir = 'FlatPlate_Lam'</code>   Name of the run directory to create for current case. <br>
<code>GridDir= 'CreateBlocks/grid/'</code>  Path to the folder which only contains grid file. <br>
<code>NumberOfBlocks = 4</code> Total number of blocks. It should match with number of gridfiles avaiable in the <strong>GridDir</strong> folder <br></p>
<div class="codehilite"><pre><span></span>AbsBinaryPath=&quot;/home/usr/FEST3D/bin/FEST3D&quot;
</pre></div>


<p>Absolute path to the FEST-3D binary. Should be in <strong>|rootfolder|/bin/FEST3D</strong><br>
Now provide the common control parameters.<br>
<code>Control['CFL'] = 100.0</code> High CFL since implicit time-integration method will be used.<br>
<code>Control['LoadLevel'] = 0</code>Since simulation will be started from scratch, <strong>0</strong> is specified.<br>
<code>Control['MaxIterations'] = 10000</code> Maximum number of iteration to perform. <br>
<code>Control['SaveIterations'] = 1000</code> Solution folder will be written every 1000 iteration. <br>
<code>Control['OutputFileFormat'] = 'vtk'</code> Type of solution file to write. If you have tecplot file viewer you can user <strong>tecplot</strong> instead of <strong>vtk</strong><br>
<code>Control['Purge'] = 1</code> Only one latest solution folder will be kept in the <strong>time_directories</strong> and rest will be deleted. <br>
<code>Control['ResidualWriteInterval'] = 20</code>Write residual in <strong>time_directories/aux/resnorm</strong> after every 5 iteration. <br>
<code>Control['Tolerance'] = "1e-13 Continuity_abs"</code> Stop the iteration if the absolute residual value of <em>continuity</em> equation is less than 1e-13. <br>
Few scheme parameters for inviscid flow:<br>
<code>Scheme['InviscidFlux'] = 'ausm'</code> Inviscid flux-reconstruction shceme. You can use: <strong>slau</strong>, <strong>ldfss0</strong>, <strong>ausmP</strong> , and <strong>ausmUP instead of __ausm</strong>.<br>
<code>Scheme['FaceState'] = 'muscl'</code> Higher-order  face-state reconstruction method. you can use: <strong>none</strong>, <strong>ppm</strong>, and <strong>weno</strong>. <br>
<code>Scheme['Limiter'] = '0 0 0  0 0 0'</code> Switch off the limiter for I,J,and K direction and switch of pressure based switching for all direction.<br>
<code>Scheme['TurbulenceLimiter'] = '1 1 1'</code> Using limiter only for turbulent variables face-state reconstruction improve convergence.<br>
<code>Scheme['TurbulenceModel']='sst'</code> using SST turbulence model. Other models <strong>kkl</strong>, <strong>sa</strong>, and <strong>sst2003</strong> can be user also. <br>
<code>Scheme['TransitionModel']='none'</code>  <strong>none</strong> is metioned for no transition model. <br>
<code>Scheme['TimeStep']='l'</code> Local time stepping method. You can use global time-stepping method also <strong>g</strong>.<br>
<code>Scheme['TimeIntegration']='implicit'</code> LU-SGS matrix-free time integration method.<br>
Now, lets define the flow feature of test case:<br>
<code>Flow["DensityInf"] = 1.17659</code> Free-stream density.<br>
<code>Flow["UInf"] = 69.445</code> Free-stream x-component of velcotiy vector. (Mach = 0.5 at T_ref=300K)<br> 
<code>Flow["VInf"] = 0.0</code> Free-stream y-component of velcotiy vector. <br>
<code>Flow["WInf"] = 0.0</code> Free-stream z-component of velcotiy vector. <br>
<code>Flow["PressureInf"] = 101325.0</code> Free-stream pressure. <br>
<code>Flow["ReferenceViscosity"] = 1.63416586e-5</code> Reference viscosity is set such that the Reynolds number (L_ref=1m) is 5 million<br></p>
<p><code>OutputControl['Out'] = ["Velocity", "Density", "Pressure", "Mu"]</code> Variables to write in the output file.<br>
<code>ResidualControl['Out'] = ["Mass_abs", "Viscous_abs", "Continuity_abs"]</code> Residual to write in the resnorm file. <br>
<code>BoundaryConditions = [-8, -4, -5, -6, -6, -6]</code> Broad boundary condition.[Riemann inlet, subsonic outlet, noslip wall and slip wall for rest ]. Since the bottom face
of the full domain have two different boundary conditions as shown in Fig. 1, and the blocking provided here is such that first out the four blocks
have inviscid region as boundary condition at the bottom face and other three have the no-slip adiabatic wall as boundary condition at
the bottom faces. The boundary condition at the bottom face (<strong>Jmin</strong>) will be changed manually in the layout.md file after the automatic 
case setup. <br></p>
<p>Rest of the variables should be left to thier default value. In order to execute this script use following command:</p>
<div class="codehilite"><pre><span></span>$python automaton.py
</pre></div>


<p>Now you will see a new folder created with <code>RunDir</code> name (<em>FlatPlate_Lam</em>). Switch to that directory to run the test case. To make sure setup is correct, check
the <code>layout.md</code> file located in <strong>system/mesh/layout/layout.md</strong>. The file should look like following:</p>
<div class="codehilite"><pre><span></span>## BLOCK LAYOUT FILE
## ==========================
## NUMBER OF PROCESSES
4
## NUMBER OF ENTRIES PER PROCESS
9
## PROCESS_NO GRID BC_FILE IMIN IMAX JMIN JMAX KMIN KMAX
## ===================================
## PROCESS 0
00  grid_00.txt  bc_00.md  -008  0001  -005  -006  -006  -006
## PROCESS 1
01  grid_01.txt  bc_01.md  0000  0002  -005  -006  -006  -006
## PROCESS 2
02  grid_02.txt  bc_02.md  0001  0003  -005  -006  -006  -006
## PROCESS 3
03  grid_03.txt  bc_03.md  0002  -004  -005  -006  -006  -006
</pre></div>


<p>Change the Jmin boundary condition for the first block from no-slip wall (-5) to slip wall (-6).</p>
<div class="codehilite"><pre><span></span>## BLOCK LAYOUT FILE
## ==========================
## NUMBER OF PROCESSES
4
## NUMBER OF ENTRIES PER PROCESS
9
## PROCESS_NO GRID BC_FILE IMIN IMAX JMIN JMAX KMIN KMAX
## ===================================
## PROCESS 0
00  grid_00.txt  bc_00.md  -008  0001  -006  -006  -006  -006
## PROCESS 1
01  grid_01.txt  bc_01.md  0000  0002  -005  -006  -006  -006
## PROCESS 2
02  grid_02.txt  bc_02.md  0001  0003  -005  -006  -006  -006
## PROCESS 3
03  grid_03.txt  bc_03.md  0002  -004  -005  -006  -006  -006
</pre></div>


<p>Finally to run the simulation use following command:</p>
<div class="codehilite"><pre><span></span>$nohup bash run.sh &amp;
</pre></div>


<p>nohup helps in avoiding any output on the screen, <strong>&amp;</strong> execute the last command in background, allowing you to keep using the terminal.</p>
<h2 id="results">Results</h2>
<figure>
  <div style="display: flex; flex-wrap: wrap; justify-content: center; align-items:center">
    <img src="../../media/tutorials/TBLSubsonicsstCf.png" alt="Contour of v speed" style="width:350px">
  </div>
  <div style="display: flex; flex-wrap: wrap; justify-content: center; align-items:center">
    <figcaption> Fig.3 Coefficient of friction along the surface of the plate for SST turbulence model. </figcaption>
  </div>
</figure>

<figure>
  <div style="display: flex; flex-wrap: wrap; justify-content: center; align-items:center">
    <img src="../../media/tutorials/TBLSubsonickklCf.png" alt="Contour of v speed" style="width:350px">
  </div>
  <div style="display: flex; flex-wrap: wrap; justify-content: center; align-items:center">
    <figcaption> Fig.4 Coefficient of friction along the surface of the plate for k-kL turbulence model. </figcaption>
  </div>
</figure>
    </div>
    
    <div class="col-md-3 col-md-pull-9">
      <hr class="visible-xs visible-sm">
        <div class="well toc">
          <ul class="nav nav-stacked nav-pills">
            <li role="presentation" class="title"><a href='../../page/index.html'>Documentation</a></li>
          </ul>
          <hr>
          <ul class="nav nav-stacked nav-pills">
            
            <li role="presentation">
            <a href='../../page/./01_install.html'>Installation</a>
            
            </li>
            
            <li role="presentation">
            <a href='../../page/./02_mesh.html'>Mesh</a>
            
            </li>
            
            <li role="presentation">
            <a href='../../page/./03_run.html'>Run</a>
            
            </li>
            
            <li role="presentation">
            <a href='../../page/./04_layout.html'>Layout file</a>
            
            </li>
            
            <li role="presentation">
            <a href='../../page/05_tutorials/index.html'>Tutorials</a>
            
            <ul class="nav nav-stacked nav-pills">
              
            <li role="presentation">
            <a href='../../page/05_tutorials/01_ramp.html'>15 degree ramp</a>
            
            </li>
            
            <li role="presentation">
            <a href='../../page/05_tutorials/02_2dbump.html'>2D Smooth Bump</a>
            
            </li>
            
            <li role="presentation">
            <a href='../../page/05_tutorials/03_LDC.html'>Lid Driven Cavity</a>
            
            </li>
            
            <li role="presentation">
            <a href='../../page/05_tutorials/04_LamFp.html'>Flat plate (laminar)</a>
            
            </li>
            
            <li role="presentation" class="disabled">
            <a href='../../page/05_tutorials/05_TurbFp.html'>Flat plate (Turbulent)</a>
            
            </li>
            
            </ul>
            
            </li>
            
          </ul>
        </div>
    </div>
    
  </div>

    <hr>    
    </div> <!-- /container -->
    <footer>
      <div class="container">
      <div class="row">
        <div class="col-xs-6 col-md-4"><p>&copy; 2019 <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/4.0/80x15.png" /></a>
                                          </p></div>
        <div class="col-xs-6 col-md-4 col-md-push-4">
          <p class="text-right">
            Documentation generated by 
            <a href="https://github.com/cmacmackin/ford">FORD</a>
             on 2019-05-15T20:05:22.012552 
          </p>
        </div>
        <div class="col-xs-12 col-md-4 col-md-pull-4"><p class="text-center"> FEST-3D was developed by FEST3D Team</p></div>
      </div>
      <br>
      </div> <!-- /container -->    
    </footer>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
<!--
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
-->
    <script src="../../js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../../js/ie10-viewport-bug-workaround.js"></script>

    <!-- MathJax JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } },
        jax: ['input/TeX','input/MathML','output/HTML-CSS'],
        extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']
      });
    </script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    
    <script src="../../tipuesearch/tipuesearch_content.js"></script>
    <script src="../../tipuesearch/tipuesearch_set.js"></script>
    <script src="../../tipuesearch/tipuesearch.js"></script>
    
    
  </body>
</html>